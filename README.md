# Description

This project allows existing users to configure accounts. The accounts can be created either from a Web interface, or by REST API commands. At this stage of the implementation, the project allows the following operations: 
  - Execute REST API to add a new account
  - Execute REST API to view all accounts for a specific user
  - Execute REST API to view all accounts (for all users)
  - Execute REST API to view a specific account (by providing the account ID)
  - Log into a Web interface by providing a valid username and password
  - The web interface allows viewing all accounts for the current user and adding a new account
  
Besides the 'accounts' and 'users' tables, the project also defines a 'user_roles' table. This table is not used at this point, as all users are currently 'regular users'. This table allows adding support for user roles. For instance, an 'admin' user could view all the accounts or delete accounts.

# Technologies

The 'Account Manager' solution was implemented in Java 11, using the Spring framework (Spring Boot and Spring MVC). User and account information is stored in a PostgreSQL database.

# Microservices

The project contains the following two solutions:
 - Account Manager
    - Spring Boot Project.
    - Exposes REST APIs for querying and adding accounts.
    - The accounts are stored in a PostgreSQL database (As such, the database needs to be up).
    - Listens to requests on port 8081.
    - The Account Manager service does _not_ perform any authentication or authorization checks. In a production environment, this service would not be reachable from outside the system. 
  - UI
    - Spring MVC Project.
    - Represents a Web Interface that allows interacting with the Account Manager service.
    - In order to access the page, users need to log in. Username and password checks are made against the 'users' table from the PostgreSQL database.
    - Is available on port 8080
    - The following three users are injected in the database before the project starts:
      - user1/password
      - user2/password
      - user3/password

# Prerequisites

In order to run the project locally the following tools will be needed:
  - Docker
  - Docker Compose

# Deployment

In order for the project to run, all three of the following services need to run:
  - Account Manager service
  - The Web interface (ui)
  - The PostgreSQL database
  
In order to achieve this, the 'Account Manager' and the 'UI' projects each contain a 'Dockerfile', which is used to build Docker images. After the Docker images are created all three services will be started.

# Databases

The 'accounts' table contains the fields below:
  - id (long, primary key, autogenerated)
  - customerId (long, not null)
  - balance (long, not null)
  - createdOn (date, not null)

The 'users' table contains the fields below:
  - id (long, primary key, autogenerated)
  - username (varchar, not null)
  - password (varchar, not null)

# Available REST APIs

The Account Manager service (http://localhost:8081) exposes the following REST APIs:

| Method | Path                 | Description                                                                               | Return code |
|--------|----------------------|-------------------------------------------------------------------------------------------|-------------|
| GET    | /accounts            | Will return all registered accounts (for all users)                                       | 200         |
| GET    | /accounts?username=x | Will return all registered accounts for the provided user                                 | 200         |
| GET    | /accounts/id         | Will return information for the provided account id                                       | 200         |
| POST   | /accounts            | Will add a new account in the database. Receives the username and balance as parameters.  | 201, 400    |

# Adding a new account

  - The following information needs to be sent in the request body of the POST request that creates a new account:
    - customerName: This is the username of the customer that is the owner of the account.
    - balance: Represents the initial balance of the account. At this point in the project, the balance field cannot be modified after creating the account.
    
# Validations

The assignment specified each user could only open one account. The implemented solution is generic, and currently allows creating 5 account per user. This number is configurable, and can be switched to '1' by modifying a constant in the AccountUtils.java file.

The system will only allow creating new accounts on weekdays (Monday-Friday), between working hours (09-17).
